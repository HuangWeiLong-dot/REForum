# æµ‹è¯•ç™»å½•åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

æµ‹è¯•ç™»å½•åŠŸèƒ½å…è®¸ä½ åœ¨å¼€å‘/æµ‹è¯•ç¯å¢ƒä¸­å¿«é€Ÿç™»å½•ï¼Œæ— éœ€åç«¯éªŒè¯ã€‚è¿™å¯¹äºå‰ç«¯å¼€å‘å’Œæµ‹è¯•éå¸¸æœ‰ç”¨ã€‚

## å¯ç”¨æ–¹å¼

### æ–¹æ³• 1: å¼€å‘ç¯å¢ƒè‡ªåŠ¨å¯ç”¨ï¼ˆæ¨èï¼‰

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼ˆ`npm run dev`ï¼‰ï¼Œæµ‹è¯•ç™»å½•åŠŸèƒ½ä¼šè‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€ä»»ä½•é…ç½®ã€‚

### æ–¹æ³• 2: é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶

å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥æ§åˆ¶æµ‹è¯•ç™»å½•åŠŸèƒ½ï¼š

**åˆ›å»º `.env` æ–‡ä»¶**ï¼ˆåœ¨ `frontend/` ç›®å½•ä¸‹ï¼‰ï¼š

```bash
# å¯ç”¨æµ‹è¯•ç™»å½•ï¼ˆæ˜ç¡®å¯ç”¨ï¼Œå³ä½¿åœ¨ç”Ÿäº§ç¯å¢ƒï¼‰
VITE_ENABLE_TEST_LOGIN=true

# ç¦ç”¨æµ‹è¯•ç™»å½•ï¼ˆæ˜ç¡®ç¦ç”¨ï¼Œå³ä½¿åœ¨å¼€å‘ç¯å¢ƒä¹Ÿä¼šç¦ç”¨ï¼‰
VITE_ENABLE_TEST_LOGIN=false

# å…¶ä»–å¯é€‰é…ç½®
# VITE_API_BASE_URL=/api
# VITE_USE_MOCK_DATA=false
```

**é…ç½®è¯´æ˜**ï¼š
- å¦‚æœè®¾ç½®ä¸º `true`ï¼šæ˜ç¡®å¯ç”¨æµ‹è¯•ç™»å½•ï¼Œå³ä½¿åœ¨ç”Ÿäº§ç¯å¢ƒä¹Ÿä¼šå¯ç”¨
- å¦‚æœè®¾ç½®ä¸º `false`ï¼šæ˜ç¡®ç¦ç”¨æµ‹è¯•ç™»å½•ï¼Œå³ä½¿åœ¨å¼€å‘ç¯å¢ƒä¹Ÿä¼šç¦ç”¨ï¼Œå·²ç™»å½•çš„æµ‹è¯•è´¦å·ä¼šè¢«è‡ªåŠ¨ç™»å‡º
- å¦‚æœä¸è®¾ç½®ï¼šåœ¨å¼€å‘ç¯å¢ƒï¼ˆ`npm run dev`ï¼‰ä¸­é»˜è®¤å¯ç”¨ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­é»˜è®¤ç¦ç”¨

**æˆ–è€…åœ¨æ„å»ºæ—¶è®¾ç½®**ï¼š

```bash
# Linux/macOS
VITE_ENABLE_TEST_LOGIN=true npm run build

# Windows PowerShell
$env:VITE_ENABLE_TEST_LOGIN="true"; npm run build

# Windows CMD
set VITE_ENABLE_TEST_LOGIN=true && npm run build
```

âš ï¸ **é‡è¦**: ç¯å¢ƒå˜é‡å¿…é¡»ä»¥ `VITE_` å¼€å¤´æ‰èƒ½åœ¨ Vite åº”ç”¨ä¸­ä½¿ç”¨ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. ä½¿ç”¨é»˜è®¤æµ‹è¯•ç”¨æˆ·

åœ¨ Header ç»„ä»¶ä¸­ï¼Œæœªç™»å½•æ—¶ä¼šæ˜¾ç¤ºä¸€ä¸ªç»¿è‰²çš„ "ğŸ§ª Test" æŒ‰é’®ï¼ˆä»…åœ¨å¼€å‘/æµ‹è¯•ç¯å¢ƒæ˜¾ç¤ºï¼‰ã€‚

ç‚¹å‡»è¯¥æŒ‰é’®å³å¯ä½¿ç”¨é»˜è®¤æµ‹è¯•ç”¨æˆ·ç™»å½•ï¼š
- ç”¨æˆ·å: `testuser`
- é‚®ç®±: `test@example.com`
- ID: `test-user-001`

### 2. ä½¿ç”¨è‡ªå®šä¹‰æµ‹è¯•ç”¨æˆ·

åœ¨ä»£ç ä¸­è°ƒç”¨ `testLogin()` å‡½æ•°å¹¶ä¼ å…¥è‡ªå®šä¹‰ç”¨æˆ·æ•°æ®ï¼š

```javascript
import { useAuth } from './context/AuthContext'

const MyComponent = () => {
  const { testLogin } = useAuth()
  
  const handleTestLogin = () => {
    testLogin({
      id: 'custom-user-001',
      username: 'admin',
      email: 'admin@example.com',
      avatar: null,
      createdAt: new Date().toISOString(),
    })
  }
  
  return <button onClick={handleTestLogin}>Test Login</button>
}
```

## å®‰å…¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦**: æµ‹è¯•ç™»å½•åŠŸèƒ½é»˜è®¤åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ç¦ç”¨ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼ˆ`npm run build` åçš„ç”Ÿäº§æ„å»ºï¼‰
- æœªè®¾ç½® `VITE_ENABLE_TEST_LOGIN=true` ç¯å¢ƒå˜é‡

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå³ä½¿è®¾ç½®äº† `VITE_ENABLE_TEST_LOGIN=true`ï¼Œä¹Ÿå»ºè®®ï¼š
1. ä»…åœ¨æµ‹è¯•æœåŠ¡å™¨ä¸Šå¯ç”¨
2. ä¸è¦åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šå¯ç”¨
3. ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œç¡®ä¿ç”Ÿäº§æ„å»ºæ—¶ä¸ä¼šæ„å¤–å¯ç”¨

## æŠ€æœ¯å®ç°

### AuthContext ä¸­çš„å®ç°

```javascript
const testLogin = (testUserData = null) => {
  // æ£€æŸ¥æ˜¯å¦å¯ç”¨æµ‹è¯•ç™»å½•
  const enableTestLogin = import.meta.env.VITE_ENABLE_TEST_LOGIN === 'true' || 
                         import.meta.env.DEV || 
                         import.meta.env.MODE === 'development'
  
  if (!enableTestLogin) {
    console.warn('Test login is disabled in production')
    return { success: false, error: 'Test login is disabled' }
  }

  // è®¾ç½®æµ‹è¯•ç”¨æˆ·å’Œ token
  const userToLogin = testUserData || defaultTestUser
  const testToken = `test-token-${Date.now()}`
  
  setToken(testToken)
  setUser(userToLogin)
  localStorage.setItem('token', testToken)
  localStorage.setItem('user', JSON.stringify(userToLogin))
  
  return { success: true, user: userToLogin }
}
```

### æµ‹è¯•ç”¨æˆ·æ•°æ®ç»“æ„

```typescript
interface TestUser {
  id: string
  username: string
  email: string
  avatar: string | null
  createdAt: string
}
```

## ä½¿ç”¨åœºæ™¯

1. **å‰ç«¯å¼€å‘**: æ— éœ€å¯åŠ¨åç«¯å³å¯æµ‹è¯•ç™»å½•åçš„åŠŸèƒ½
2. **UI æµ‹è¯•**: å¿«é€Ÿåˆ‡æ¢ç™»å½•çŠ¶æ€æµ‹è¯•ç•Œé¢
3. **åŠŸèƒ½æµ‹è¯•**: æµ‹è¯•éœ€è¦ç™»å½•æƒé™çš„åŠŸèƒ½
4. **æ¼”ç¤º**: å¿«é€Ÿå±•ç¤ºç™»å½•åçš„ç•Œé¢

## æµ‹è¯•ç”¨æˆ·èµ„æ–™é¡µé¢

ä½¿ç”¨æµ‹è¯•ç™»å½•åï¼Œè®¿é—®ç”¨æˆ·èµ„æ–™é¡µé¢ï¼ˆ`/user/test-user-001`ï¼‰ä¼šæ˜¾ç¤ºå®Œæ•´çš„æ¨¡æ‹Ÿæ•°æ®ï¼š

### ç”¨æˆ·ä¿¡æ¯
- ç”¨æˆ·å: `testuser`
- é‚®ç®±: `test@example.com`
- ç®€ä»‹: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•ç›®çš„ã€‚"
- å¸–å­æ•°: 3
- è¯„è®ºæ•°: 12
- åŠ å…¥æ—¶é—´: 30å¤©å‰

### æ¨¡æ‹Ÿå¸–å­
æµ‹è¯•ç”¨æˆ·èµ„æ–™é¡µé¢åŒ…å« 3 ä¸ªæ¨¡æ‹Ÿå¸–å­ï¼š
1. **æµ‹è¯•å¸–å­ 1** - æ¬¢è¿ä½¿ç”¨ REForum
2. **æµ‹è¯•å¸–å­ 2** - PWA åŠŸèƒ½æµ‹è¯•
3. **æµ‹è¯•å¸–å­ 3** - å¤šè¯­è¨€æ”¯æŒ

è¿™äº›æ•°æ®å®Œå…¨åœ¨å‰ç«¯ç”Ÿæˆï¼Œæ— éœ€åç«¯æ”¯æŒã€‚

## æ³¨æ„äº‹é¡¹

1. **API è¯·æ±‚**: ä½¿ç”¨æµ‹è¯•ç™»å½•åï¼Œå¤§éƒ¨åˆ† API è¯·æ±‚ä»ä¼šå‘é€åˆ°åç«¯ã€‚å¦‚æœåç«¯æœªè¿è¡Œï¼Œå¯èƒ½ä¼šå¤±è´¥ã€‚ä½†ç”¨æˆ·èµ„æ–™é¡µé¢ä¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ã€‚
2. **æ•°æ®æŒä¹…åŒ–**: æµ‹è¯•ç™»å½•ä¿¡æ¯ä¼šä¿å­˜åˆ° localStorageï¼Œåˆ·æ–°é¡µé¢åä»ç„¶ä¿æŒç™»å½•çŠ¶æ€ã€‚
3. **é€€å‡ºç™»å½•**: ä½¿ç”¨ `logout()` å‡½æ•°å¯ä»¥æ¸…é™¤æµ‹è¯•ç™»å½•çŠ¶æ€ã€‚
4. **æµ‹è¯•ç”¨æˆ·æ£€æµ‹**: ç³»ç»Ÿé€šè¿‡ token å‰ç¼€ `test-token-` æˆ–ç”¨æˆ· ID å‰ç¼€ `test-user-` æ¥è¯†åˆ«æµ‹è¯•ç”¨æˆ·ã€‚

## ç¦ç”¨æµ‹è¯•ç™»å½•

å¦‚æœéœ€è¦åœ¨å¼€å‘ç¯å¢ƒä¸­ç¦ç”¨æµ‹è¯•ç™»å½•ï¼š

1. ç¡®ä¿ `.env` æ–‡ä»¶ä¸­æ²¡æœ‰ `VITE_ENABLE_TEST_LOGIN=true`
2. ä½¿ç”¨ç”Ÿäº§æ¨¡å¼æ„å»ºï¼š`npm run build`
3. æµ‹è¯•ç™»å½•æŒ‰é’®å°†ä¸ä¼šæ˜¾ç¤º

## æ•…éšœæ’é™¤

### æµ‹è¯•ç™»å½•æŒ‰é’®ä¸æ˜¾ç¤º

1. æ£€æŸ¥æ˜¯å¦åœ¨å¼€å‘æ¨¡å¼ï¼š`npm run dev`
2. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š`VITE_ENABLE_TEST_LOGIN=true`
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### æµ‹è¯•ç™»å½•å API è¯·æ±‚å¤±è´¥

è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºæµ‹è¯•ç™»å½•åªè®¾ç½®å‰ç«¯çŠ¶æ€ï¼Œä¸ç»è¿‡åç«¯éªŒè¯ã€‚å¦‚æœéœ€è¦å®Œæ•´çš„ API åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨çœŸå®çš„ç™»å½•æµç¨‹ã€‚

## ç›¸å…³æ–‡ä»¶

- `frontend/src/context/AuthContext.jsx` - æµ‹è¯•ç™»å½•å®ç°
- `frontend/src/components/Header.jsx` - æµ‹è¯•ç™»å½•æŒ‰é’®
- `frontend/src/services/api.js` - API é…ç½®

